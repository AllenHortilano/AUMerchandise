<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arellano University Marketplace</title>
    <link rel="stylesheet" href="product.css">
</head>
<body>
    <header>
        <div class="logo">
            <h1>ARELLANO UNIVERSITY</h1>
            <p>Official School Marketplace</p>
        </div>
        <nav>
            <ul class="nav-menu">
                <li><a href="HomeScreen.html">Home</a></li>
                <li><a href="services.html">Services</a></li>
                <li><a href="Product.html" class="active">Products</a></li>
                <li><a href="AboutUs.html">About Us</a></li>
            </ul>
        </nav>
    </header>
    
    <div class="container">
        <h2 class="page-title">Official Merchandise</h2>
        
        <div class="product-filter">
            <div class="filter-options">
                <select id="category-filter">
                    <option value="all">All Categories</option>
                    <option value="clothing">Clothing</option>
                    <option value="accessories">Accessories</option>
                    <option value="merch">Merchandise</option>
                </select>
            </div>
            
            <div class="search-box">
                <input type="text" id="search-input" placeholder="Search products...">
            </div>
        </div>
        
        <div class="products" id="products-container">
            <!-- Products will be loaded here dynamically -->
        </div>
    </div>
    
    <div class="modal" id="product-modal">
        <div class="modal-content">
            <button class="close-btn" id="close-modal">&times;</button>
            <div class="product-detail" id="product-detail">
                <!-- Product details will be loaded here -->
            </div>
        </div>
    </div>
    
    <!-- Student Purchase Form Modal -->
    <div class="purchase-form-modal" id="purchase-form-modal">
        <div class="purchase-form-content">
            <button class="close-btn" id="close-purchase-form">&times;</button>
            <h2 class="form-title">Student Purchase Form</h2>
            
            <div class="form-product-info" id="form-product-info">
                <!-- Product info will be shown here -->
            </div>
            
            <form id="student-purchase-form">
                <div class="form-group">
                    <label for="student-id">Student ID Number:</label>
                    <input type="text" id="student-id" name="student-id" placeholder="e.g. 20XX-XXXXX" required>
                </div>
                
                <div class="form-group">
                    <label for="student-name">Full Name:</label>
                    <input type="text" id="student-name" name="student-name" placeholder="First Name Last Name" required>
                </div>
                
                <div class="form-group">
                    <label for="student-course">Course:</label>
                    <select id="student-course" name="student-course" required>
                        <option value="">Select your course</option>
                        <option value="BSCS">BS Computer Science</option>
                        <option value="BSIT">BS Information Technology</option>
                        <option value="BSBA">BS Business Administration</option>
                        <option value="BSHM">BS Hospitality Management</option>
                        <option value="BSA">BS Accountancy</option>
                        <option value="BSN">BS Nursing</option>
                        <option value="BSCrim">BS Criminology</option>
                        <option value="BSPsych">BS Psychology</option>
                        <option value="BSEd">BS Education</option>
                        <option value="Other">Other</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="student-year">Year Level:</label>
                    <select id="student-year" name="student-year" required>
                        <option value="">Select your year level</option>
                        <option value="1">1st Year</option>
                        <option value="2">2nd Year</option>
                        <option value="3">3rd Year</option>
                        <option value="4">4th Year</option>
                        <option value="5">5th Year</option>
                        <option value="graduate">Graduate Student</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="student-email">Email Address:</label>
                    <input type="email" id="student-email" name="student-email" placeholder="example@arellano.edu.ph" required>
                </div>
                
                <div class="form-group">
                    <label for="student-mobile">Mobile Number:</label>
                    <input type="tel" id="student-mobile" name="student-mobile" placeholder="09XXXXXXXXX" required>
                </div>
                
                <div class="form-group">
                    <label for="payment-method">Payment Method:</label>
                    <select id="payment-method" name="payment-method" required>
                        <option value="">Select payment method</option>
                        <option value="cashier">University Cashier</option>
                        <option value="gcash">GCash</option>
                        <option value="paymaya">PayMaya</option>
                        <option value="bank">Bank Transfer</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="pickup-method">Pickup Method:</label>
                    <select id="pickup-method" name="pickup-method" required>
                        <option value="">Select pickup method</option>
                        <option value="campus">Campus Pickup (Main Campus)</option>
                        <option value="campus-legarda">Campus Pickup (Legarda Campus)</option>
                        <option value="campus-malabon">Campus Pickup (Malabon Campus)</option>
                        <option value="campus-pasig">Campus Pickup (Pasig Campus)</option>
                        <option value="campus-pasay">Campus Pickup (Pasay Campus)</option>
                        <option value="delivery">Delivery (Additional Fee)</option>
                    </select>
                </div>
                
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" id="cancel-purchase">Cancel</button>
                    <button type="submit" class="btn btn-primary" id="confirm-purchase">Confirm Purchase</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Admin Panel Button -->
    <button class="admin-button" id="admin-button">A</button>
    
    <!-- Admin Panel Modal -->
    <div class="admin-panel-modal" id="admin-panel-modal">
        <div class="admin-panel-content">
            <button class="close-btn" id="close-admin-panel">&times;</button>
            <h2 class="admin-panel-title">Admin Panel</h2>
            
            <div class="admin-tabs">
                <div class="admin-tab active" data-tab="manage-products">Manage Products</div>
                <div class="admin-tab" data-tab="add-product">Add New Product</div>
            </div>
            
            <div class="admin-tab-content active" id="manage-products">
                <h3>Current Products</h3>
                <div id="admin-product-list">
                    <!-- Products will be listed here -->
                </div>
            </div>
            
            <div class="admin-tab-content" id="add-product">
                <h3>Add New Product</h3>
                <form id="add-product-form">
                    <div class="form-group">
                        <label for="product-name">Product Name:</label>
                        <input type="text" id="product-name" name="product-name" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="product-price">Price (PHP):</label>
                        <input type="number" id="product-price" name="product-price" min="1" step="0.01" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="product-category">Category:</label>
                        <select id="product-category" name="product-category" required>
                            <option value="">Select category</option>
                            <option value="clothing">Clothing</option>
                            <option value="accessories">Accessories</option>
                            <option value="merch">Merchandise</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="product-description">Short Description:</label>
                        <textarea id="product-description" name="product-description" required></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="product-details">Detailed Description:</label>
                        <textarea id="product-details" name="product-details" required></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="product-image">Product Image:</label>
                        <input type="file" id="product-image" name="product-image" accept="image/*" required>
                        <div class="image-preview" id="image-preview">
                            <span>Image Preview</span>
                        </div>
                    </div>
                    
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" id="reset-product-form">Reset</button>
                        <button type="submit" class="btn btn-primary">Add Product</button>
                    </div>
                </form>
            </div>
            
            <!-- Edit Product Tab Content (Hidden by default) -->
            <div class="admin-tab-content" id="edit-product">
                <h3>Edit Product</h3>
                <form id="edit-product-form">
                    <input type="hidden" id="edit-product-id">
                    
                    <div class="form-group">
                        <label for="edit-product-name">Product Name:</label>
                        <input type="text" id="edit-product-name" name="edit-product-name" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="edit-product-price">Price (PHP):</label>
                        <input type="number" id="edit-product-price" name="edit-product-price" min="1" step="0.01" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="edit-product-category">Category:</label>
                        <select id="edit-product-category" name="edit-product-category" required>
                            <option value="">Select category</option>
                            <option value="clothing">Clothing</option>
                            <option value="accessories">Accessories</option>
                            <option value="merch">Merchandise</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="edit-product-description">Short Description:</label>
                        <textarea id="edit-product-description" name="edit-product-description" required></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="edit-product-details">Detailed Description:</label>
                        <textarea id="edit-product-details" name="edit-product-details" required></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="edit-product-image">Product Image:</label>
                        <input type="file" id="edit-product-image" name="edit-product-image" accept="image/*">
                        <p><small>Leave empty to keep current image</small></p>
                        <div class="image-preview" id="edit-image-preview">
                            <span>Current Image</span>
                        </div>
                    </div>
                    
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" id="cancel-edit">Cancel</button>
                        <button type="submit" class="btn btn-primary">Update Product</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    
    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h3>About Arellano University</h3>
                <p>Arellano University is a private, Catholic university in the Philippines, founded in 1938 by Florentino Cayco, Sr.</p>
            </div>
            
            <div class="footer-section">
                <h3>Quick Links</h3>
                <ul>
                    <li><a href="HomeScreen.html">University Website</a></li>
                    <li><a href="#">Student Portal</a></li>
                    <li><a href="#">Alumni Association</a></li>
                    <li><a href="#">Academic Calendar</a></li>
                </ul>
            </div>
            
            <div class="footer-section">
                <h3>Contact Information</h3>
                <p>3058 Taft Avenue., Pasay City, Metro Manila, Philippines</p>
                <p>Email: info@arellano.edu.ph</p>
                <p>Phone: (02) 8735-8401</p>
            </div>
        </div>
        
        <div class="footer-bottom">
            <p>&copy; 2025 Arellano University School Marketplace. All Rights Reserved.</p>
        </div>
    </footer>
    
    <script>
        // Product data
        let products = [
            {
                id: 1,
                name: "Arellano Founding T-shirt",
                price: 350,
                description: "Commemorate the founding of Arellano University with this special edition t-shirt. Features the university logo and founding year.",
                image: "shirt1.jpg",
                category: "clothing",
                details: "100% cotton, available in sizes S to XXL. This commemorative t-shirt celebrates the rich heritage of Arellano University. The design includes the university's founding date and iconic architecture. Perfect for students, alumni, and supporters of the university."
            },
            {
                id: 2,
                name: "Arellano ID Lace",
                price: 120,
                description: "Official Arellano University ID lace with breakaway safety feature and university colors.",
                image: "Lace.jpg",
                category: "accessories",
                details: "High-quality polyester material with metal clip. The ID lace comes in the university's official maroon and gold colors, featuring the Arellano University name and logo printed throughout. The breakaway safety feature ensures student safety."
            },
            {
                id: 3,
                name: "Arellano Varsity Jersey",
                price: 850,
                description: "Official basketball jersey as worn by the Arellano Chiefs. Premium quality with breathable fabric.",
                image: "Varsity.jpg",
                category: "clothing",
                details: "Made with moisture-wicking performance fabric. This authentic replica of the jersey worn by the Arellano Chiefs basketball team features the university colors and logo. Available in home and away versions, sized S through XXL. Perfect for showing your school spirit at games or casual wear."
            },
            {
                id: 4,
                name: "Arellano Varsity Warmer",
                price: 1200,
                description: "Stay warm and show your school spirit with this official Arellano University varsity jacket.",
                image: "Warmer.jpg",
                category: "clothing",
                details: "Fleece-lined for maximum warmth and comfort. This varsity-style jacket features embroidered Arellano University logos, premium quality zipper, and two front pockets. Perfect for cooler weather while representing your school. Available in sizes S to XXL."
            },
            {
                id: 5,
                name: "Arellano Marketing Merch",
                price: 550,
                description: "Special merchandise for Marketing students featuring department-specific designs and mottos.",
                image: "Merch.jpg",
                category: "merch",
                details: "Collection includes notebooks, pens, tumblers, and bags designed specifically for Marketing students. Each item features motivational quotes and marketing concepts along with the Arellano University branding. Perfect for marketing students to show departmental pride."
            }
        ];
        
        // DOM elements
        const productsContainer = document.getElementById('products-container');
        const categoryFilter = document.getElementById('category-filter');
        const searchInput = document.getElementById('search-input');
        const modal = document.getElementById('product-modal');
        const closeModal = document.getElementById('close-modal');
        const productDetail = document.getElementById('product-detail');
        const purchaseFormModal = document.getElementById('purchase-form-modal');
        const closePurchaseForm = document.getElementById('close-purchase-form');
        const formProductInfo = document.getElementById('form-product-info');
        const studentPurchaseForm = document.getElementById('student-purchase-form');
        const cancelPurchase = document.getElementById('cancel-purchase');
        
        // Admin panel elements
        const adminButton = document.getElementById('admin-button');
        const adminPanelModal = document.getElementById('admin-panel-modal');
        const closeAdminPanel = document.getElementById('close-admin-panel');
        const adminTabs = document.querySelectorAll('.admin-tab');
        const adminTabContents = document.querySelectorAll('.admin-tab-content');
        const adminProductList = document.getElementById('admin-product-list');
        const addProductForm = document.getElementById('add-product-form');
        const editProductForm = document.getElementById('edit-product-form');
        const resetProductForm = document.getElementById('reset-product-form');
        const cancelEdit = document.getElementById('cancel-edit');
        
        // Purchase form variables
        let currentProduct = null;
        let currentQuantity = 1;
        
        // Display products
        function displayProducts(productsList) {
            productsContainer.innerHTML = '';
            
            productsList.forEach(product => {
                const productCard = document.createElement('div');
                productCard.className = 'product-card';
                productCard.dataset.id = product.id;
                
                productCard.innerHTML = `
                    <div class="product-image">
                        <img src="${product.image}" alt="${product.name}">
                    </div>
                    <div class="product-info">
                        <h3 class="product-name">${product.name}</h3>
                        <p class="product-price">₱${product.price.toFixed(2)}</p>
                        <p class="product-description">${product.description.substring(0, 80)}${product.description.length > 80 ? '...' : ''}</p>
                        <div class="product-actions">
                            <button class="btn btn-secondary view-details">View Details</button>
                            <button class="btn btn-primary add-to-cart">Add to Cart</button>
                        </div>
                    </div>
                `;
                
                productsContainer.appendChild(productCard);
            });
            
            // Add event listeners to buttons
            document.querySelectorAll('.view-details').forEach(button => {
                button.addEventListener('click', function() {
                    const productId = parseInt(this.closest('.product-card').dataset.id);
                    openProductDetails(productId);
                });
            });
            
            document.querySelectorAll('.add-to-cart').forEach(button => {
                button.addEventListener('click', function() {
                    const productId = parseInt(this.closest('.product-card').dataset.id);
                    openPurchaseForm(productId, 1);
                });
            });
        }
        
        // Display admin product list
        function displayAdminProductList() {
            adminProductList.innerHTML = '';
            
            products.forEach(product => {
                const listItem = document.createElement('div');
                listItem.className = 'product-list-item';
                
                listItem.innerHTML = `
                    <img src="${product.image}" alt="${product.name}">
                    <div class="product-list-item-info">
                        <h4>${product.name}</h4>
                        <p>₱${product.price.toFixed(2)} | ${product.category.charAt(0).toUpperCase() + product.category.slice(1)}</p>
                    </div>
                    <div class="product-list-item-actions">
                        <button class="btn btn-secondary edit-product" data-id="${product.id}">Edit</button>
                        <button class="btn btn-primary delete-product" data-id="${product.id}">Delete</button>
                    </div>
                `;
                
                adminProductList.appendChild(listItem);
            });
            
            // Add event listeners for edit and delete buttons
            document.querySelectorAll('.edit-product').forEach(button => {
                button.addEventListener('click', function() {
                    const productId = parseInt(this.getAttribute('data-id'));
                    editProduct(productId);
                });
            });
            
            document.querySelectorAll('.delete-product').forEach(button => {
                button.addEventListener('click', function() {
                    const productId = parseInt(this.getAttribute('data-id'));
                    deleteProduct(productId);
                });
            });
        }
        
        // Filter products
        function filterProducts() {
            const categoryValue = categoryFilter.value;
            const searchValue = searchInput.value.toLowerCase();
            
            let filteredProducts = products;
            
            if (categoryValue !== 'all') {
                filteredProducts = filteredProducts.filter(product => product.category === categoryValue);
            }
            
            if (searchValue) {
                filteredProducts = filteredProducts.filter(product => 
                    product.name.toLowerCase().includes(searchValue) || 
                    product.description.toLowerCase().includes(searchValue)
                );
            }
            
            displayProducts(filteredProducts);
        }
        
        // Open product details modal
        function openProductDetails(productId) {
            const product = products.find(p => p.id === productId);
            
            if (product) {
                productDetail.innerHTML = `
                    <div class="product-detail-image">
                        <img src="${product.image}" alt="${product.name}">
                    </div>
                    <div class="product-detail-info">
                        <h2>${product.name}</h2>
                        <p class="product-detail-price">₱${product.price.toFixed(2)}</p>
                        <div class="product-detail-description">
                            <p>${product.details || product.description}</p>
                        </div>
                        <div class="quantity-selector">
                            <button id="decrease-quantity">-</button>
                            <input type="number" id="quantity" value="1" min="1" max="10">
                            <button id="increase-quantity">+</button>
                        </div>
                        <div class="product-detail-actions">
                            <button class="btn btn-primary" id="add-to-cart-detail">Add to Cart</button>
                            <button class="btn btn-secondary" id="add-to-wishlist">Add to Wishlist</button>
                        </div>
                    </div>
                `;
                
                modal.style.display = 'flex';
                
                // Quantity selector
                document.getElementById('decrease-quantity').addEventListener('click', function() {
                    const quantity = document.getElementById('quantity');
                    if (parseInt(quantity.value) > 1) {
                        quantity.value = parseInt(quantity.value) - 1;
                    }
                });
                
                document.getElementById('increase-quantity').addEventListener('click', function() {
                    const quantity = document.getElementById('quantity');
                    if (parseInt(quantity.value) < 10) {
                        quantity.value = parseInt(quantity.value) + 1;
                    }
                });
                
                // Add to cart from detail
                document.getElementById('add-to-cart-detail').addEventListener('click', function() {
                    const quantity = parseInt(document.getElementById('quantity').value);
                    modal.style.display = 'none';
                    openPurchaseForm(productId, quantity);
                });
                
                // Add to wishlist
                document.getElementById('add-to-wishlist').addEventListener('click', function() {
                    alert(`${product.name} added to your wishlist!`);
                });
            }
        }
        
        // Open purchase form
        function openPurchaseForm(productId, quantity) {
            const product = products.find(p => p.id === productId);
            
            if (product) {
                currentProduct = product;
                currentQuantity = quantity;
                
                // Display product info in the form
                formProductInfo.innerHTML = `
                    <h3>${product.name}</h3>
                    <p><strong>Price:</strong> ₱${product.price.toFixed(2)}</p>
                    <p><strong>Quantity:</strong> ${quantity}</p>
                    <p><strong>Total:</strong> ₱${(product.price * quantity).toFixed(2)}</p>
                `;
                
                // Reset form fields
                studentPurchaseForm.reset();
                
                // Show the purchase form modal
                purchaseFormModal.style.display = 'flex';
            }
        }
        
        // Edit product
        function editProduct(productId) {
            const product = products.find(p => p.id === productId);
            
            if (product) {
                // Set the form values
                document.getElementById('edit-product-id').value = product.id;
                document.getElementById('edit-product-name').value = product.name;
                document.getElementById('edit-product-price').value = product.price;
                document.getElementById('edit-product-category').value = product.category;
                document.getElementById('edit-product-description').value = product.description;
                document.getElementById('edit-product-details').value = product.details || '';
                
                // Display current image
                const imagePreview = document.getElementById('edit-image-preview');
                imagePreview.innerHTML = `<img src="${product.image}" alt="${product.name}">`;
            }
                // Show the edit tab
adminTabContents.forEach(content => {
    content.classList.remove('active');
});
document.getElementById('edit-product').classList.add('active');

// Update the tabs
adminTabs.forEach(tab => {
    tab.classList.remove('active');
});

// Create an "Edit Product" tab if it doesn't exist
let editTab = document.querySelector('.admin-tab[data-tab="edit-product"]');
if (!editTab) {
    editTab = document.createElement('div');
    editTab.className = 'admin-tab active';
    editTab.setAttribute('data-tab', 'edit-product');
    editTab.textContent = 'Edit Product';
    document.querySelector('.admin-tabs').appendChild(editTab);
} else {
    editTab.classList.add('active');
}
}

// Delete product
function deleteProduct(productId) {
    if (confirm('Are you sure you want to delete this product?')) {
        products = products.filter(product => product.id !== productId);
        displayAdminProductList();
        displayProducts(products);
    }
}

// Initialize the page
document.addEventListener('DOMContentLoaded', function() {
    // Display all products initially
    displayProducts(products);
    
    // Filter event listeners
    categoryFilter.addEventListener('change', filterProducts);
    searchInput.addEventListener('input', filterProducts);
    
    // Close modal
    closeModal.addEventListener('click', function() {
        modal.style.display = 'none';
    });
    
    // Close purchase form
    closePurchaseForm.addEventListener('click', function() {
        purchaseFormModal.style.display = 'none';
    });
    
    cancelPurchase.addEventListener('click', function() {
        purchaseFormModal.style.display = 'none';
    });
    
    // Submit purchase form
    studentPurchaseForm.addEventListener('submit', function(e) {
        e.preventDefault();
        
        // Here you would typically send the form data to a server
        alert('Purchase submitted successfully! You will receive a confirmation email shortly.');
        
        // Close the form
        purchaseFormModal.style.display = 'none';
    });
    
    // Admin panel
    adminButton.addEventListener('click', function() {
        displayAdminProductList();
        adminPanelModal.style.display = 'flex';
    });
    
    closeAdminPanel.addEventListener('click', function() {
        adminPanelModal.style.display = 'none';
    });
    
    // Admin tabs
    adminTabs.forEach(tab => {
        tab.addEventListener('click', function() {
            const tabId = this.getAttribute('data-tab');
            
            // Remove active class from all tabs and contents
            adminTabs.forEach(t => t.classList.remove('active'));
            adminTabContents.forEach(c => c.classList.remove('active'));
            
            // Add active class to current tab and content
            this.classList.add('active');
            document.getElementById(tabId).classList.add('active');
        });
    });
    
    // Reset add product form
    resetProductForm.addEventListener('click', function() {
        addProductForm.reset();
        document.getElementById('image-preview').innerHTML = '<span>Image Preview</span>';
    });
    
    // Image preview for add product
    document.getElementById('product-image').addEventListener('change', function(e) {
        const file = e.target.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                document.getElementById('image-preview').innerHTML = `<img src="${e.target.result}" alt="Preview">`;
            };
            reader.readAsDataURL(file);
        }
    });
    
    // Image preview for edit product
    document.getElementById('edit-product-image').addEventListener('change', function(e) {
        const file = e.target.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                document.getElementById('edit-image-preview').innerHTML = `<img src="${e.target.result}" alt="Preview">`;
            };
            reader.readAsDataURL(file);
        }
    });
    
    // Cancel edit
    cancelEdit.addEventListener('click', function() {
        adminTabs.forEach(tab => {
            if (tab.getAttribute('data-tab') === 'manage-products') {
                tab.click();
            }
        });
    });
    
    // Add product form submit
    addProductForm.addEventListener('submit', function(e) {
        e.preventDefault();
        
        // Get form values
        const name = document.getElementById('product-name').value;
        const price = parseFloat(document.getElementById('product-price').value);
        const category = document.getElementById('product-category').value;
        const description = document.getElementById('product-description').value;
        const details = document.getElementById('product-details').value;
        const imageInput = document.getElementById('product-image');
        
        // In a real application, you would upload the image to a server
        // For demo purposes, we'll use a placeholder or the file name
        let imagePath = 'placeholder.jpg';
        if (imageInput.files.length > 0) {
            // In a real app, this would be the upload path
            imagePath = imageInput.files[0].name;
        }
        
        // Create new product object
        const newProduct = {
            id: products.length > 0 ? Math.max(...products.map(p => p.id)) + 1 : 1,
            name,
            price,
            description,
            image: imagePath,
            category,
            details
        };
        
        // Add to products array
        products.push(newProduct);
        
        // Reset form and display updated products
        addProductForm.reset();
        document.getElementById('image-preview').innerHTML = '<span>Image Preview</span>';
        displayProducts(products);
        displayAdminProductList();
        
        // Show manage products tab
        adminTabs.forEach(tab => {
            if (tab.getAttribute('data-tab') === 'manage-products') {
                tab.click();
            }
        });
        
        alert('Product added successfully!');
    });
    
    // Edit product form submit
    editProductForm.addEventListener('submit', function(e) {
        e.preventDefault();
        
        // Get form values
        const id = parseInt(document.getElementById('edit-product-id').value);
        const name = document.getElementById('edit-product-name').value;
        const price = parseFloat(document.getElementById('edit-product-price').value);
        const category = document.getElementById('edit-product-category').value;
        const description = document.getElementById('edit-product-description').value;
        const details = document.getElementById('edit-product-details').value;
        const imageInput = document.getElementById('edit-product-image');
        
        // Find the product to update
        const productIndex = products.findIndex(p => p.id === id);
        
        if (productIndex !== -1) {
            // Update product details
            products[productIndex].name = name;
            products[productIndex].price = price;
            products[productIndex].category = category;
            products[productIndex].description = description;
            products[productIndex].details = details;
            
            // Update image if a new one was selected
            if (imageInput.files.length > 0) {
                // In a real app, this would be the upload path
                products[productIndex].image = imageInput.files[0].name;
            }
            
            // Display updated products
            displayProducts(products);
            displayAdminProductList();
            
            // Show manage products tab
            adminTabs.forEach(tab => {
                if (tab.getAttribute('data-tab') === 'manage-products') {
                    tab.click();
                }
            });
            
            alert('Product updated successfully!');
        }
    });
    
    // Close modals when clicking outside the content
    window.addEventListener('click', function(e) {
        if (e.target === modal) {
            modal.style.display = 'none';
        } else if (e.target === purchaseFormModal) {
            purchaseFormModal.style.display = 'none';
        } else if (e.target === adminPanelModal) {
            adminPanelModal.style.display = 'none';
        }
    });
});
</script>
</body>
</html>